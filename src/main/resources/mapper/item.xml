<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.home.domain.mapper.ItemMapper">
    <insert id="insertItem" parameterType="itemDto">
        insert into item(type, longitude, latitude, address, title, description, sale_price,
                         deposit, monthly_rent, rooms, bathrooms, size, member_id,
                         created_at, updated_at, sold)
        values (#{type}, #{longitude}, #{latitude}, #{address}, #{title}, #{description}, #{salePrice},
                #{deposit}, #{monthlyRent}, #{rooms}, #{bathrooms}, #{size}, #{memberId},
                now(), now(), false)

    </insert>

    <insert id="insertImg" parameterType="map">
        INSERT INTO item_img (item_id, url)
        VALUES (#{item_id}, #{url})
    </insert>

    <delete id="deleteItem" parameterType="map">
        DELETE from item where item_id = #{item_id} and member_id = #{member_id}
    </delete>

    <select id="search" parameterType="map" resultType="itemDto">
        select item_id as itemId, member_id as memberId, sold from item where item_id = #{item_id} and member_id = #{member_id}
    </select>

    <select id="sold" parameterType="map">
        UPDATE item SET sold = #{sold}
        where item_id = #{item_id} and member_id = #{member_id}
    </select>
</mapper>